---
import Layout from '../layouts/Layout.astro';

const pageTitle = "Contact Nasif Salaam | Visual Designer & AI Enablement Specialist";
const pageDescription = "Get in touch to discuss your visual design needs or learn how AI can enhance your creative workflows.";
---

<Layout 
  title={pageTitle}
  description={pageDescription}
>
  <div class="container max-w-5xl mx-auto px-4 pt-32">
    <div class="max-w-2xl mx-auto">
      <h1 class="text-4xl font-bold mb-6 text-foreground">Let's Create Something Amazing</h1>
      <p class="text-xl text-muted-foreground mb-8">
        Looking to elevate your digital presence through innovative design or integrate AI into your creative workflows? I'd love to hear about your project.
      </p>
      
      <!-- Services and Contact Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
        <div class="space-y-4">
          <h2 class="text-xl font-semibold text-foreground">Services</h2>
          <ul class="space-y-2 text-muted-foreground">
            <li>• Visual Design & UI Systems</li>
            <li>• AI Workflow Implementation</li>
            <li>• Design System Development</li>
            <li>• Team AI Enablement Training</li>
          </ul>
        </div>
        <div class="space-y-4">
          <h2 class="text-xl font-semibold text-foreground">Contact Details</h2>
          <div class="space-y-2 text-muted-foreground">
            <p>Email: hello@nasifsalaam.com</p>
            <p>Location: Cape Town, South Africa</p>
            <p>Available for: Remote & Local Projects</p>
          </div>
        </div>
      </div>

      <!-- Form with status message -->
      <div id="status-message" class="hidden mb-6 p-4 rounded-lg"></div>

      <form id="contact-form" class="space-y-6">
        <div>
          <label for="name" class="block text-sm font-medium text-foreground mb-2">
            Name
          </label>
          <input
            type="text"
            id="name"
            name="name"
            class="w-full rounded-lg bg-transparent border border-primary/20 px-4 py-3 text-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors"
            required
          />
        </div>

        <div>
          <label for="email" class="block text-sm font-medium text-foreground mb-2">
            Email
          </label>
          <input
            type="email"
            id="email"
            name="email"
            class="w-full rounded-lg bg-transparent border border-primary/20 px-4 py-3 text-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors"
            required
          />
        </div>

        <div>
          <label for="service" class="block text-sm font-medium text-foreground mb-2">
            Service Interest
          </label>
          <select
            id="service"
            name="service"
            class="w-full rounded-lg bg-transparent border border-primary/20 px-4 py-3 text-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors"
            required
          >
            <option value="">Select a service</option>
            <option value="visual-design">Visual Design</option>
            <option value="ai-enablement">AI Enablement</option>
            <option value="design-systems">Design Systems</option>
            <option value="training">Team Training</option>
            <option value="other">Other</option>
          </select>
        </div>

        <div>
          <label for="message" class="block text-sm font-medium text-foreground mb-2">
            Project Details
          </label>
          <textarea
            id="message"
            name="message"
            rows="6"
            placeholder="Tell me about your project, timeline, and goals..."
            class="w-full rounded-lg bg-transparent border border-primary/20 px-4 py-3 text-foreground focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors"
            required
          ></textarea>
        </div>

        <button
          type="submit"
          class="inline-flex h-12 items-center justify-center rounded-full bg-primary px-8 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/80"
        >
          Send Message
        </button>
      </form>

      <div class="mt-12 text-sm text-muted-foreground">
        <p>* I typically respond within 24-48 hours during business days.</p>
      </div>
    </div>
  </div>
</Layout>

<script>
  // Form handling
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const button = form?.querySelector('button') as HTMLButtonElement;
  const statusMessage = document.getElementById('status-message') as HTMLDivElement;

  function showStatus(message: string, type: 'success' | 'error') {
    statusMessage.textContent = message;
    statusMessage.classList.remove('hidden', 'bg-green-500/10', 'text-green-500', 'bg-red-500/10', 'text-red-500');
    
    if (type === 'success') {
      statusMessage.classList.add('bg-green-500/10', 'text-green-500');
    } else {
      statusMessage.classList.add('bg-red-500/10', 'text-red-500');
    }
  }

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Update button state
    const originalText = button.textContent;
    button.disabled = true;
    button.textContent = 'Sending...';

    try {
      const response = await fetch('/api/contact', {
        method: 'POST',
        body: new FormData(form)
      });

      if (response.ok) {
        showStatus('Message sent successfully! I\'ll be in touch soon.', 'success');
        form.reset();
        window.location.href = '/thank-you';
      } else {
        const data = await response.json();
        throw new Error(data.message || 'Failed to send message');
      }
    } catch (error) {
      console.error('Error:', error);
      showStatus(error.message || 'Failed to send message. Please try again.', 'error');
      button.disabled = false;
      button.textContent = originalText;
    }
  });
</script>